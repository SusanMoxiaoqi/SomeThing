FenXiang = {		filePath : null,		imageName : null,		fenXiangTime : 2.0,//防止玩家段时间连续点击分享按钮		_RootShareNode : null,		shareContent : null,		shareUrl: "http://m1-web.baiyishuihu.com/Share/index.php",		shareTxt: "街机水浒传，百分百移植，经典再现，快来体验吧！",		sharePicture: "http://m1-web.baiyishuihu.com/Share/images/shz.png",		creatFenXiangLayer : function(self) {			cc.log("mianfensongjinyinggaizouzheli******************");			var size = cc.winSize;			FenXiang.fenXiangTime = 2;			var rootFenXiang = ccs.load("res/shz/TanChuCeng/meiRiFenXiang.json").node;			FenXiang._RootShareNode = rootFenXiang;			rootFenXiang.x = size.width/2;			rootFenXiang.y = size.height/2;			var zhezhao = TestPushBox.create(rootFenXiang);			self.addChild(zhezhao,200);			var queren = ccui.helper.seekWidgetByName(rootFenXiang, "chaHao");			queren.addClickEventListener(function() {				cc.log("queren");				cc.pool.putInPool(zhezhao);				var numberAry =["res/shz/TanChuCeng/tanChuCengRes/meirifenxiang"];				removeResources(numberAry);			});			this.imageName = "sajin.jpd";			if (sys.os == sys.OS_IOS) {				cc.log("是ios平台");				this.filePath = jsb.reflection.callStaticMethod("shangCheng", 						"screenShot:andUserID:",						this. imageName,						USER_dwUserID				)			}else if (sys.os == sys.OS_ANDROID) {				cc.log("是Android平台");				this.filePath ="#fenxiangTu.png";			}; 			cc.log(this.filePath);			if (this.filePath) {				var jietu = rootFenXiang.getChildByName("jietu");				var pos = jietu.getPosition();				var sp = new cc.Sprite(this.filePath);				sp.x = pos.x;				sp.y = pos.y;				rootFenXiang.addChild(sp,10000);			};			var weixinBtn = rootFenXiang.getChildByName("weixin");			weixinBtn.addClickEventListener(this.weiXinButtonCallBack);			var qqBtn = rootFenXiang.getChildByName("qq");			qqBtn.addClickEventListener(this.qqButtonCallBack);			var weiboBtn = rootFenXiang.getChildByName("weibo");			var banbenhao = slocal.getItem("ORIGINAL_VERSION");			if (banbenhao < "1.0.1.7") {				weiboBtn.setVisible(false);			}			weiboBtn.addClickEventListener(this.weiboButtonCallBack);			if (!this.shareContent) {				this.getShareContent();			};		},		kongZhiAnNiuTime : function() {			FenXiang.fenXiangTime=2;		},		weiXinButtonCallBack : function() {			if (FenXiang.fenXiangTime == 0) {				return;			}else if (FenXiang.fenXiangTime == 2) {				FenXiang.fenXiangTime = 0;			}			FenXiang._RootShareNode.scheduleOnce(FenXiang.kongZhiAnNiuTime,2.0);			var animationKoo =new ls.AnimationKoo();			if (sys.os == sys.OS_IOS) {				animationKoo.weiXinShare(FenXiang.shareUrl,FenXiang.shareTxt,FenXiang.filePath);			} else if (sys.os == sys.OS_ANDROID) {				animationKoo.weiXinShare(FenXiang.shareUrl,FenXiang.shareTxt,FenXiang.sharePicture);			}		},		qqButtonCallBack : function() {			if (FenXiang.fenXiangTime == 0) {				return;			}else if (FenXiang.fenXiangTime == 2) {				FenXiang.fenXiangTime = 0;			}			FenXiang._RootShareNode.scheduleOnce(FenXiang.kongZhiAnNiuTime, 2.0);			cc.log("开始调用qq分享");			var animationKoo1 =new ls.AnimationKoo();			if (sys.os == sys.OS_IOS) {				animationKoo1.qqZoneShare(FenXiang.shareUrl,FenXiang.shareTxt,FenXiang.filePath);			} else if (sys.os == sys.OS_ANDROID) {				animationKoo1.qqZoneShare(FenXiang.shareUrl,FenXiang.shareTxt,FenXiang.sharePicture);			}		},		weiboButtonCallBack : function(){			if (FenXiang.fenXiangTime === 0) {				return;			}else if (FenXiang.fenXiangTime === 2) {				FenXiang.fenXiangTime = 0;			}			FenXiang._RootShareNode.scheduleOnce(FenXiang.kongZhiAnNiuTime, 2.0);			var animationKoo1 =new ls.AnimationKoo();			if (sys.os == sys.OS_IOS) {				cc.log("是ios平台");				animationKoo1.SinaWeiboShare(FenXiang.shareUrl,FenXiang.shareTxt + FenXiang.shareUrl,FenXiang.filePath);				cc.log("FenXiang.filePath,FenXiang.filePath",FenXiang.filePath,FenXiang.imageName);			}else if (sys.os == sys.OS_ANDROID) {				animationKoo1.SinaWeiboShare(FenXiang.shareUrl,FenXiang.shareTxt + FenXiang.shareUrl,FenXiang.sharePicture);			};		},		getShareContent : function() {			var testHttp = cc.loader.getXMLHttpRequest();			var channelid = 1000059;			if(typeof(CONFIG) == "undefined"){			}else{				channwlStr = CONFIG.channelNumber;			};			testHttp.open("GET", "http://m1-web.baiyishuihu.com/Share/share.php?channelid="+channelid);			testHttp.timeout = 10000;//设置请求超时时间			['loadstart', 'abort', 'error', 'load', 'loadend', 'timeout'].forEach(function (eventname) {//得到各个阶段下的状态				testHttp["on" + eventname] = function () {					if (eventname == "error" || eventname == "timeout") {						if (waitQuan.xianShi) {							waitQuan.unuse();						}					};				}			});			testHttp.onreadystatechange = function() {				if (testHttp.readyState ==4 && testHttp.status == 200 ) {					var jieshouData = testHttp.responseText;					cc.log(">>>>>>>>>>>>>>>>>>>>>>",jieshouData);					//保存读取到的东西					FenXiang.shareContent = JSON.parse(jieshouData);					FenXiang.shareUrl = FenXiang.shareContent.shareUrl;					FenXiang.shareTxt = FenXiang.shareContent.shareTxt;					FenXiang.sharePicture = FenXiang.shareContent.sharePicture;					if (waitQuan.xianShi) {						waitQuan.unuse();					}				};			};			testHttp.send();			if (!waitQuan.xianShi) {				waitQuan.reuse(10);				cc.director.getRunningScene().addChild(waitQuan,1000);			}		}};//typeID：101qq，102微信，103微博share_callback = function(platform){	cc.log("SSSSSS");	if (platform == 2) {		loginServer.sendMessage(MDM_MB_USER_SERVICE,SUB_MB_REQUEST_SHARE_GAME,{dwUserID : USER_dwUserID,wKindID : 203, wShareType : 102});	} else if (platform == 4) {		loginServer.sendMessage(MDM_MB_USER_SERVICE,SUB_MB_REQUEST_SHARE_GAME,{dwUserID : USER_dwUserID,wKindID : 203, wShareType : 101});	} else if (platform == 0) {		loginServer.sendMessage(MDM_MB_USER_SERVICE,SUB_MB_REQUEST_SHARE_GAME,{dwUserID : USER_dwUserID,wKindID : 203, wShareType : 103});	}};/// 各个分享平台的枚举//enum Platform {///// 新浪微博//SINA = 0,///// 微信//WEIXIN = 1,///// 微信朋友圈//WEIXIN_CIRCLE = 2,///// QQ//QQ = 3,///// QQ空间//QZONE = 4,///// 人人网//RENREN = 5,///// 豆瓣//DOUBAN = 6,///// 来往//LAIWANG = 7,///// 来往动态//LAIWANG_CIRCLE = 8,///// 易信//YIXIN = 9,///// 易信朋友圈//YIXIN_CIRCLE = 10,///// facebook//FACEBOOK = 11,///// twitter//TWITTER = 12,///// instagram//INSTAGRAM = 13,///// 短信//SMS = 14,///// 邮件//EMAIL = 15,///// 腾讯微博//TENCENT_WEIBO = 16//};